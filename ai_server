server {
	listen 80;
	listen [::]:80;
	# add here the ip address of your server
    # or a domain pointing to that ip (like example.com or www.example.com)
    server_name aiserver.daotao.ai;
    server_tokens off;
    client_max_body_size 50M;
    #access_log /home/edtechai/aiserver/api/logs/nginx-access.log;
    #error_log /home/edtechai/aiserver/api/logs/nginx-error.log;
	location / {
		proxy_set_header        Host $host:$server_port;
		proxy_set_header        X-Real-IP $remote_addr;
		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header        X-Forwarded-Proto $scheme;
		proxy_redirect off;
		proxy_pass http://localhost:3333/;
	}
    location /linknk/ {
		proxy_set_header        
		Host $host:$server_port;
		proxy_set_header        X-Real-IP $remote_addr;
		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header        X-Forwarded-Proto $scheme;        
			proxy_redirect off;                
		proxy_pass http://localhost:5000/;    
    }
    location  /minifas/ {
		proxy_set_header        
		Host $host:$server_port;
		proxy_set_header        X-Real-IP $remote_addr;
		proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header        X-Forwarded-Proto $scheme;        
			proxy_redirect off;                
		proxy_pass http://localhost:8668/;    
	}	
    location /.well-known/acme-challenge/ {
		root /var/www/certbot;
	}
	location  /StudentFaceRegister {
		alias /home/edtechai/aiserver/UI/Student/StudentFaceRegistration/;
		default_type 'text/html';
		try_files $uri.html $uri =404;        	
		index index.html;
	}		
	location  /StudentExamination {
		alias /home/edtechai/aiserver/UI/Student/Examination/;
		default_type 'text/html';
		try_files $uri.html $uri =404;          
		index index.html;
	}
	location  /StudentFaceAttendance {
		alias /home/edtechai/aiserver/UI/Student/StudentFaceAttendance/;
		default_type 'text/html';
		try_files $uri.html $uri =404;          
		index index.html;
    }
	location  /Score {
		alias /home/edtechai/aiserver/UI/Score/;
		default_type 'text/html';
		try_files $uri.html $uri =404;
		index index.html;
	}
	location  /Teacher/ExamManagement {
                alias /home/edtechai/aiserver/UI/Teacher/ExamManagement/;
                default_type 'text/html';
                try_files $uri.html $uri =404;          
                index index.html;
    	}
	

	location /images {
		alias /home/edtechai/aiserver/images/;
		try_files $uri $uri/ =404;
		#proxy_set_header        Host $host:$server_port;
		#proxy_set_header        X-Real-IP $remote_addr;
		#proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		#proxy_set_header        X-Forwarded-Proto $scheme;
		#proxy_redirect http:// https://;
		#proxy_pass http://localhost:2402/images/;    
		# Required for new HTTP-based CLI
		#proxy_http_version 1.1;
		#proxy_request_buffering off;
		#proxy_buffering off; # Required for HTTP-based CLI to work oveocker

    }

    listen [::]:443 ssl ipv6only=on; # managed by Certbot
    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/aiserver.daotao.ai/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/aiserver.daotao.ai/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

}
